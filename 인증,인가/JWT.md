# 인증(Authentication) & 인가(Authorization)

- **인증(Authentication)**: 사용자가 누구인지 확인하는 과정 (예: 로그인)
- **인가(Authorization)**: 인증된 사용자가 어떤 권한을 가지는지 결정하는 과정 (예: 권한 부여)

---

# HTTP의 특징

- **Stateless(무상태성)**
    - 서버가 클라이언트의 상태를 저장하지 않음
    - 각 요청은 독립적으로 처리됨
    - 서버 확장성이 높고, 장애 복구가 쉬움
    - 단점: 로그인 등 상태가 필요한 기능은 별도의 상태 관리가 필요함[1][4][5][6][7]

- **Connectionless(비연결성)**
    - 요청/응답이 끝나면 서버와의 연결을 종료함
    - 서버 자원을 효율적으로 사용
    - 단, HTTP/1.1부터는 `keep-alive`로 TCP 연결을 재사용하는 **Persistent Connection**이 기본
    - 실시간 데이터 전송(SSE 등)이나 여러 요청을 효율적으로 처리할 때 연결을 유지할 수 있음[2][5][6]

---

## HTTP의 Stateless 극복: 상태 관리

- HTTP는 본질적으로 Stateless이기 때문에, 로그인 등 상태 유지를 위해 **쿠키(Cookie)**, **세션(Session)**, **JWT(Json Web Token)** 등 별도의 상태 관리 방법이 필요함[4][5][6].

---

# HTTP 메시지 구조

- **헤더(Header)**: 요청/응답의 부가 정보(쿠키, 인증 등)
- **본문(Body)**: 실제 데이터(로그인 정보, 폼 데이터 등)

> 쿠키는 HTTP 헤더에 포함되어 전송됨

---

# 쿠키(Cookie)

- **목적**: Stateless한 HTTP에서 상태 정보를 유지하기 위해 사용
- **동작**:
    - 서버가 `Set-Cookie` 헤더로 쿠키를 설정하면, 클라이언트가 이후 요청 시 `Cookie` 헤더에 쿠키를 포함해 전송
- **보안**:
    - `HttpOnly` 속성을 사용하면 자바스크립트 등 클라이언트 스크립트에서 쿠키 접근 불가(반드시 백엔드에서 설정)
    - `Secure`, `SameSite` 등 다양한 속성 존재
- **주의**:
    - HttpOnly를 제외한 대부분의 쿠키 속성은 클라이언트에서도 설정 가능함

---

# 세션(Session)

- **상태 유지 방식**: 서버가 로그인(세션) 상태를 직접 저장 (Stateful)
- **사용 예시**: 서버에 로그인한 사용자 정보를 저장하고, 클라이언트는 세션 ID만 쿠키로 보냄
- **상태란?**: 보통 유저 정보 등 데이터, 즉 "상태가 있다"는 것은 서버에 정보가 있다는 의미

---

# JWT (Json Web Token)

- **상태 유지 방식**: 클라이언트(브라우저, 앱)에 로그인 정보를 저장 (Stateless)
- **서버는 별도의 로그인 정보를 저장하지 않음**, 클라이언트가 JWT를 보유
- **구조**:
    1. 헤더(Header): 토큰 정보와 서명 알고리즘
    2. 페이로드(Payload): 클레임(Claim) 정보
    3. 서명(Signature): 무결성 검증
- **특징**:
    - JWT는 Base64URL로 인코딩만 되어 있고, 암호화되어 있지 않으므로 민감한 정보 저장 금지
    - 누구나 디코딩하여 내용을 볼 수 있음
    - JWT의 페이로드에 중요한 정보를 넣지 않도록 주의

---

# 세션 vs JWT

- **세션**: 서버가 상태를 관리 (Stateful), 클라이언트는 세션 ID만 보관
- **JWT**: 클라이언트가 상태(토큰)를 보관 (Stateless), 서버는 별도 저장 X
- 둘 다 HTTP 요청 시 항상 함께 전송되어야 하며, 서버는 요청마다 사용자를 식별해야 함

---

> **요약**
> - HTTP는 본질적으로 Stateless(무상태)하며, 필요에 따라 상태 관리(쿠키, 세션, JWT 등)가 필요
> - 쿠키는 상태 유지를 위해 사용되며, 보안 설정(HttpOnly 등)에 주의
> - 세션은 서버에 상태를 저장, JWT는 클라이언트에 상태를 저장
> - JWT는 인코딩만 되어 있어 민감한 정보 저장 금지
