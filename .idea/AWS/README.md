# AWS 알고 쓰자!

## AWS의 특징
- 유연성 : 필요한 만큼만 사용하고, 필요 없으면 끄면 됨
- 확장성 : 트래픽이 늘어나면 자동으로 확장 가능
- 비용 절감 : 초기 서버 비용 없이 시작 가능
- 글로벌 인프라 : 전 세계 여러 리전에 인프라 구축 가능

-> 예전에는 회사에서물리 서버를 구매하고 IDC에 설치했어야 했음
-> 하지만 AWS를 사용하면 콘솔에서 클릭 몇 번만으로 서버를 띄우고, DB도 생성하고, 웹사이트를 전 세계에 배포할 수 있게 됨

## AWS 주요 서비스 상세 설명
-> AWS가 제공하는 서비스는 약 1억개...

### 1. EC2
 - 가상 서버를 제공하는 서비스
 - 우리가 흔히 말하는 '서버'를 AWS에서 제공하는 형태 

#### 핵심 개념
- CPU, 메모리, 스토리지, 네트워크 등을 가진 가상의 컴퓨터
- 리눅스/윈도우/Ubuntu OS 선택 가능
- SSH를 통해 직접 접속해 앱 설치 가능
#### 특징
- 원하는 인스턴스타입(cpu, memory 기준)을 선택 가능
- 스냅샷으로 백업 및 복원 가능
- Auto Scaling, Load Balancing과 연동 가능
#### 예시
- Spring Boot 서버를 EC2에 올려 java-jar로 직접 실행
- 포트 80 열고 NGINX 띄워 웹 서비스 운영
-> ec2를 실행하면 CUI가 없는 컴퓨터를 하나 가진다고 생각하면 됨!

### 2.ECS
- Docker 컨테이너 기반 애플리케이션을 실행하는 서비스
#### 핵심 기념
- Docker 이미지를 실행하는 환경
- EC2나 AWS Fargate 위에서 실행 가능
- 서버리스로 이용 가능
#### 특징
- 컨테이너 기반으로 경량화된 배포 가능
- 자동 스케일링, 헬스체크 가능
- CI/CD 파이프라인 연동에 최적화
#### 예시
- Dockerfile로 만든 Spring 앱을 ECS에서 실행
- 배포 시 컨테이너 수만큼 확장 가능
-> 요건 지금 몰라도됨

### 3.S3(Simple Storage Service)
- 파일 저장소- 사진, 동영상, 문서 등을 저장할 때 사용
#### 핵심 개념
- 객체 스토리지
- Bucket -> Key 구조로 파일 저장
- 가상 하드디스크라고 보면 됨
#### 특징
- 무제한 용량, 내구성 99.9999999%
- 정적 웹사이트 호스팅 가능
- IAM 정책으로 접근 제어 가능
#### 예시
- 유저 프로필 이미지를 S3에 업로드
- 정적 웹 페이지(html, css, js) 호스팅

### 4. RDS(Relational Database Service)
#### 핵심 개념
- 관리형 DB 인스턴스 제공 (백업, 패치 자동화)
- Multi-AZ로 고가용성 구성 가능
#### 특징
- EC2보다 관리 부담 적음
- 보안 그룹으로 접근 제한
- CloudWatch로 모니터링 가능
#### 예시
- Spring 애플리케이션이 RDS의 MySQL에 연결해 사용자 데이터 저장
- 데이터 URL: `jdbc:mysql://rds-endpoint.amazonaws.com:3306/mydb`

### 5. 보안 그룹 (Security Group)
- 방화벽 역할을 하는 가상 인프라 보안 설정
- 보안 그룹은 인스턴스 수준에서 트래픽을 허용하거나 차단할 수 있는 규칙을 정의
- 인스턴스에 대한 접근을 세밀하게 제어
- 보안 그룹은 **상태 저장형(Stateful)**. 즉, 들어오는 트래픽에 대한 규칙이 있으면, 나가는 트래픽은 자동으로 허용되며, 반대로 나가는 트래픽에 대한 규칙이 있으면, 들어오는 트래픽도 자동으로 허용

### 핵심 개념

- EC2, RDS, ALB 등에 적용 가능
- 인바운드 / 아웃바운드 트래픽 설정
- 포트(Port)
    - 소프트웨어에서의 포트는 네트워크 서비스 혹은 특정 프로세스를 식별하는 논리적 단위
    - 따라서 IP 내의 프로세스를 정확히 식별하기 위해 사용됨
    - 인증된 IP 범위
    - IPv4 and IPv6
    - IP(Internet Protocol) 주소는 인터넷에서 **기기(서버, PC, 휴대폰 등)를 식별하기 위한 고유 주소 =** 인터넷의 “주소”  
    - IPv4 (Internet Protocol version 4)
  - **32비트** 주소 체계
  - 네 개의 숫자 블록으로 구성됨
  - 형식: 192.168.0.1 (0~255 범위 숫자 4개)
  - 총 약 43억 개의 IP만 생성 가능
  - 우리가 흔히 보는 대부분의 IP 주소
- IPv6 (Internet Protocol version 6)
    - 128비트 주소 체계
    - 16진수 + 콜론(:)으로 구분된 8개의 블록  ex) 2001:0db8:85a3:0000:0000:8a2e:0370:7334
    - 주소 개수가 사실상 무한대
    - 보안 기능(암호화)이 기본 내장됨
    - 더 빠르고 효율적인 라우팅 가능
  
- 인스턴스 밖에서 안으로 들어오는 Inbound Network
- 인스턴스 안에서 밖으로 나가는 Outbound Network

1. 인바운드 규칙으로 정해진 IP와 Port를 추가하였기 때문에 보안 그룹을 통과하여 인스턴스에 접속할 수 있다.
2. 인바운드 규칙으로 허용된 IP 혹은 Port가 아니라면 접속할 수 없다.
3. 아웃바운드 규칙으로 모든 트래픽을 허용하였기 때문에 IP, Port와 상관없이 바깥으로 내보낼 수 있다.
### 특징

- 허용만 가능, 차단은 불가능 (화이트리스트 방식)
- 상태 저장형 (응답은 자동 허용)

### 예시

- EC2 인스턴스: 22(SSH), 80(HTTP), 443(HTTPS) 포트 허용
- RDS: 3306 포트만 특정 보안 그룹에서만 접근 허용

### 6. 대상 그룹 **(Target Group)**

- 로드밸런서가 트래픽을 분산시킬 대상 그룹
- 로드밸런서랑 알면 좀 더 편함!

### 핵심 개념

- EC2, ECS, Lambda를 타겟으로 등록 가능
- 헬스 체크 경로 설정 가능 (/health)

### 특징

- 여러 EC2 인스턴스를 하나의 그룹으로 묶음
- 헬스 체크 실패 시 자동 제외됨

### 예시

- ALB가 타겟 그룹에 연결된 EC2 인스턴스들에만 요청 전달
- /health가 200이 아니면 해당 인스턴스를 제외

### 7. **로드밸런서 (Load Balancer - ALB/NLB/CLB)**

- 트래픽을 여러 서버로 분산하는 서비스

### 핵심 개념

- ALB: 애플리케이션 계층 (HTTP, HTTPS)
- NLB: 네트워크 계층 (TCP, TLS)
- CLB: 고전적인 로드밸런서 (구버전)
- 리스너 : 로드밸런서(ALB/NLB)가 트래픽을 수신할 포트와 프로토콜을 지정하고, 어떤 요청을 어떤 타겟 그룹으로 보낼지 규칙을 정의하는 구성요소

### 특징

- ALB는 경로 기반 라우팅 지원 (/api → A서버, /admin → B서버)
- SSL 인증서 적용 가능 (HTTPS)

### 예시

- 사용자가 [https://myapp.com](https://myapp.com/) 접속 → ALB → 타겟 그룹의 EC2 전달

### 9. **AWS Lambda**

- 서버 없이 코드를 실행하는 서버리스(Serverless) 컴퓨팅 서비스

### 핵심 개념

- 서버를 직접 만들지 않고 **코드만 작성하면 자동으로 실행**됨
- 이벤트 기반으로 작동 (예: S3에 파일 업로드, HTTP 호출 등)
- 필요할 때만 실행되고, 실행한 만큼만 비용 부과됨 (초 단위 과금)

### 특징

- **서버 관리 불필요**: 인프라 관리 없이 코드를 배포하고 실행
- **이벤트 기반 실행**: API Gateway, S3, DynamoDB 등과 연동 가능
- **짧은 작업에 최적화**: 15분 이하 실행 작업에 적합
- **자동 스케일링**: 동시 요청도 자동으로 병렬 처리

### 예시

- S3에 이미지 업로드 → Lambda가 자동으로 리사이징
- 사용자 등록 시 → Lambda가 환영 이메일 자동 발송
- API Gateway와 연결해서 간단한 백엔드 API 구성

